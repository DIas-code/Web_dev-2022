(window.webpackJsonp=window.webpackJsonp||[]).push([["5b92","p1zY"],{"9Ji0":function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("pVnL")),s=m(r("q1tI")),a=r("mR6N"),l=o(r("Pwnf")),i=o(r("SGU3")),c=r("Vxy9"),u=r("JimW"),p=m(r("HEOz")),d=o(r("wINb")),h=r("whzC");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class g extends s.Component{constructor(...e){super(...e),this.renderScreenshot=e=>s.createElement(u.View,null,s.createElement("a",{href:e.url,target:"_blank"},s.createElement("img",{className:(0,a.css)(y.screenshot),alt:"",src:(0,d.default)(e.thumb)})),s.createElement(i.default,{href:e.url},s.createElement(c.LabelLarge,{style:y.title},e.translatedTitle))),this.renderAuthorName=e=>{if(!e.authorKaid)return e.authorNickname;const t=`/profile/${e.authorKaid}`;return s.createElement(i.default,{href:(0,h.safeLinkTo)(t)},s.createElement(c.LabelSmall,{style:y.author},e.authorNickname))},this.renderDetails=e=>s.createElement(u.View,{style:y.stats},p.ngettext("%(num)s Vote","%(num)s Votes",e.sumVotesIncremented)," ","Â·"," ",p.ngettext("%(num)s Spin-Off","%(num)s Spin-Offs",e.spinoffCount))}render(){const e=this.props.project;return s.createElement(u.View,{style:y.project},this.renderScreenshot(e),this.renderAuthorName(e),this.renderDetails(e))}}class j extends s.Component{render(){const e=this.props.projects.map(((e,t)=>s.createElement(g,{key:e.url,project:e})));return s.createElement("div",{className:(0,a.css)(y.module)},e)}}const w={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:200},y=a.StyleSheet.create({module:{overflow:"hidden"},project:{float:"left",marginBottom:22,marginRight:32},screenshot:{border:`1px solid ${l.default.offBlack16}`,boxSizing:"border-box",height:200,width:200},title:(0,n.default)({},w),author:(0,n.default)({},w),stats:{color:l.default.offBlack64}});var v=j;t.default=v},SLeZ:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r("q1tI")),s=o(r("SGU3")),a=r("JimW"),l=o(r("osXv")),i=o(r("wF1t")),c=r("whzC"),u=d(r("HEOz"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}class h extends n.Component{render(){const{flagLoading:e,flagError:t,flag:r}=this.props;if(e||t||!r)return null;const o=(0,c.safeLinkTo)(u._("https://support.khanacademy.org/hc/en-us/articles/360052460831"));return n.createElement(a.View,{style:{marginBottom:16}},n.createElement(l.default,null,u._("We have turned off peer evaluations.")," ",n.createElement(s.default,{href:o,target:"_blank"},u._("Learn more here."))))}}var f=(0,i.default)({name:"peer_eval_banner"})(h);t.default=f},ZaqX:function(e,t,r){"use strict";var o=r("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=w(r("q1tI")),s=r("mR6N"),a=o(r("wa3X")),l=o(r("Pwnf")),i=r("JimW"),c=r("Vxy9"),u=r("JasB"),p=r("vwLt"),d=r("yhei"),h=r("skGw"),f=o(r("9Ji0")),m=o(r("SLeZ")),g=w(r("HEOz"));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}const y={top:{name:g._("Top"),value:1},recent:{name:g._("Recent"),value:2},hot:{name:g._("Hot"),value:3},spotlight:{name:g._("Contests"),value:4},votes:{name:g._("Votes"),value:5},oldest:{name:g._("Oldest"),value:6}};class v extends n.Component{constructor(e){super(e),this.getProjectsURL=()=>{const e={sort:y[this.state.sort].value,page:this.state.page,limit:this.props.numPerPage};return this.props.topicId&&(e.topic_id=this.props.topicId),this.props.curriculum&&(e.curriculum=this.props.curriculum),this.state.cursor&&(e.cursor=this.state.cursor),this.state.projectStatus&&(e.projectState=this.state.projectStatus),`${this.props.url}&${(0,h.encodeParams)(e)}`},this.loadMoreProjects=()=>{const{onFullyInteractive:e}=this.props;this.state.loading||(this._isMounted&&this.setState({error:null,loading:!0}),(0,h.khanFetch)(this.getProjectsURL()).then((e=>e.json())).then((t=>{const r=(this.state.projects||[]).concat(t.scratchpads);this._isMounted&&this.setState({projects:r,complete:t.complete,page:this.state.page+1,cursor:t.cursor,loading:!1}),e&&e()})).catch((()=>{this._isMounted&&this.setState({error:g._("Error loading projects, please try again."),loading:!1})})))},this.changeProjectStatus=e=>{this._isMounted&&this.setState({complete:!1,cursor:"",page:0,projects:null,projectStatus:e},(()=>this.loadMoreProjects()))},this.renderProjectStatusFilter=()=>this.props.showProjectStatusFilter?n.createElement(i.View,null,n.createElement(m.default,null),n.createElement(p.SingleSelect,{onChange:this.changeProjectStatus,placeholder:"Filter by project status",selectedValue:this.state.projectStatus||"all",style:S.dropdown},n.createElement(p.OptionItem,{label:g._("All projects"),value:"all"}),n.createElement(p.OptionItem,{label:g._("only spin-offs of official projects"),value:"official-spinoffs"}))):null,this.changeSort=e=>{this._isMounted&&this.setState({complete:!1,cursor:"",page:0,projects:null,sort:e},(()=>this.loadMoreProjects()))},this.renderSorts=()=>0===this.props.sorts.length?null:n.createElement(i.View,{style:S.sorts},this.props.sorts.map((e=>n.createElement(a.default,{kind:"tertiary",onClick:()=>this.changeSort(e),disabled:this.state.loading||e===this.state.sort,key:y[e].value,style:S.sortButton},y[e].name)))),this.renderFilterBar=()=>this.props.hideFilterBar?null:n.createElement(i.View,{style:S.filterBar},this.renderTitle(),this.renderProjectStatusFilter(),n.createElement(u.Spring,null),this.renderSorts()),this.renderNotice=()=>this.props.hideNotice?null:n.createElement(i.View,{style:S.noticeWrap},n.createElement(c.LabelSmall,{style:S.notice},g._("Note: we don't show projects that have no changes, are by child accounts, or are by anonymous users."))),this.renderError=()=>this.state.error?n.createElement("p",{className:(0,s.css)(S.error)},this.state.error):null,this.renderShowMoreButton=()=>this.props.static||this.state.complete?null:n.createElement(i.View,{style:S.showMore},n.createElement(a.default,{onClick:()=>this.loadMoreProjects(),disabled:this.state.loading,kind:"secondary"},g._("Show more projects")),this.renderError()),this.renderTitle=()=>this.props.title?n.createElement("h3",{className:(0,s.css)(S.title)},this.props.title):null,this.state={loading:!1,complete:!1,cursor:"",error:null,page:0,projects:null,projectStatus:null,sort:e.defaultSort},this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.clearAndLoadProjects()}componentDidUpdate(e){e.url!==this.props.url&&this.clearAndLoadProjects()}componentWillUnmount(){this._isMounted=!1}clearAndLoadProjects(){this.setState({projects:[]}),this.loadMoreProjects()}render(){const e=this.state.projects;return e?0===e.length?n.createElement(i.View,null,this.renderFilterBar(),this.props.noResults()):n.createElement(i.View,null,this.renderFilterBar(),n.createElement(f.default,{projects:e}),this.state.loading&&n.createElement(d.CircularSpinner,null),this.renderError(),this.renderNotice(),this.renderShowMoreButton()):n.createElement(i.View,null,this.renderFilterBar(),this.renderError(),!this.state.error&&n.createElement(d.CircularSpinner,null))}}v.defaultProps={defaultSort:"top",noResults:()=>null,numPerPage:30,sorts:["top","recent"]};const S=s.StyleSheet.create({title:{lineHeight:"37px",marginBottom:0,verticalAlign:"bottom"},dropdown:{width:350},filterBar:{flexDirection:"row",borderBottom:`1px solid ${l.default.offBlack16}`,marginBottom:22,paddingBottom:10},sorts:{flexDirection:"row"},sortButton:{marginLeft:10},error:{color:l.default.red},noticeWrap:{color:l.default.offBlack64,margin:"22px 0",textAlign:"center"},notice:{margin:"0 auto",maxWidth:450,textAlign:"left"},showMore:{alignItems:"center",borderTop:`1px solid ${l.default.offBlack16}`,marginTop:22,paddingTop:12}});var b=v;t.default=b}}]);
//# sourceMappingURL=../../sourcemaps/en/5b92.e096a12e46b643873ac8.js.map