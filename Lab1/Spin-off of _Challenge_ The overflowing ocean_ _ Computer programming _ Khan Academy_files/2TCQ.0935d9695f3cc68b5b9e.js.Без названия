(window.webpackJsonp=window.webpackJsonp||[]).push([["2TCQ"],{"/tP0":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(n("q1tI")),r=n("mR6N"),a=s(n("wa3X")),l=n("Vxy9"),i=n("JasB"),c=s(n("gE8/")),d=n("Uafs"),u=n("JimW"),p=n("z8VS"),h=f(n("HEOz"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}class g extends o.Component{constructor(...e){super(...e),this.state={justification:"",reason:""},this.handleChange=e=>{this.setState({reason:e})},this.handleSubmit=()=>{this.props.onSelectReason(this.state.reason,this.state.justification),this.props.closeModal()},this.renderAction=(e,t)=>{const{examples:n,header:s,name:r}=e,a=n.join(", ");return o.createElement(p.Choice,{key:t,label:s,value:r,description:a})},this.renderButtons=()=>{const{actions:e}=this.props,t=e.map(((e,t)=>this.renderAction(e,t)));return o.createElement(p.RadioGroup,{label:h._("This is instance of:"),groupName:"reason",onChange:this.handleChange,selectedValue:this.state.reason},t)}}renderModal(e){const{bodyText:t}=this.props;let n=this.props.textContent;n.length>275&&(n=n.substring(0,275)+"...");const s=e.get("justification-label"),p=e.get("justification-textarea"),m=o.createElement(u.View,null,o.createElement(l.LabelMedium,{id:s,htmlFor:p},h._("How does this violate our guidelines?")),o.createElement("textarea",{"aria-labelledby":s,id:p,className:(0,r.css)(y.textarea),rows:"3",value:this.state.justification,onChange:e=>this.setState({justification:e.target.value})}));return o.createElement(d.OnePaneDialog,{title:h._("Flag for Guardian attention"),content:o.createElement(u.View,null,o.createElement(l.Body,null,t),o.createElement(i.Strut,{size:c.default.medium_16}),m,o.createElement(i.Strut,{size:c.default.medium_16}),this.renderButtons()),footer:o.createElement(u.View,{style:y.modalFooter},o.createElement(a.default,{kind:"tertiary",onClick:this.props.closeModal},h._("Cancel")),o.createElement(i.Strut,{size:c.default.medium_16}),o.createElement(a.default,{kind:"primary",onClick:this.handleSubmit,disabled:!this.state.reason},h._("Submit")))})}render(){return o.createElement(u.UniqueIDProvider,{mockOnFirstRender:!0,scope:"coding-flag-modal"},(e=>this.renderModal(e)))}}g.defaultProps={textContent:""};const y=r.StyleSheet.create({textarea:{width:"100%"},modalFooter:{flexDirection:"row",justifyContent:"flex-end"}});var v=g;t.default=v},"3aD9":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("pVnL")),r=y(n("q1tI")),a=n("mR6N"),l=s(n("wa3X")),i=n("JimW"),c=n("Vxy9"),d=n("Uafs"),u=s(n("mXPZ")),p=n("skGw"),h=(n("qgfM"),s(n("NYIc"))),m=s(n("JlCW")),f=y(n("HEOz"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}class v extends r.Component{render(){const e=this.props.model.get("type");return u.default.isLoggedIn?"scratchpad"===e?r.createElement(h.default,{onSelectReason:(...e)=>{var t;return(t=this.props).submitFlag.apply(t,e)},textContent:this.props.model.getTextContent(),closeModal:this.props.closeModal,isComputerProgramming:!1}):r.createElement(m.default,{onSelectReason:(...e)=>{var t;return(t=this.props).submitFlag.apply(t,e)},textContent:this.props.model.getTextContent(),closeModal:this.props.closeModal}):r.createElement(d.OnePaneDialog,{title:f._("Oh noes!"),content:r.createElement(c.Body,null,f._("You must log in to flag.")),footer:r.createElement(i.View,null,r.createElement(l.default,{kind:"primary",onClick:this.props.closeModal},f._("Okay"))),style:E.loginModal})}}class b extends r.Component{constructor(...e){super(...e),this.state={sendingFlag:!1,justFlagged:!1},this.submitFlag=(e,t)=>{this.setState({sendingFlag:!0}),(0,p.khanFetch)("/api/internal/discussions/flagentity",(0,o.default)({},(0,p.formUrlencode)({flag:e,justification:t,entity_key:this.props.model.id}),{method:"POST"})).then((e=>{this.setState({justFlagged:!0,sendingFlag:!1})})).catch((e=>{this.setState({sendingFlag:!1})}))}}render(){const e=this.props.model,t=e.get("flaggedByUser")||this.state.justFlagged,n=t?f._("Flagged"):f._("Flag");let s="tertiary",o="small";return e.get("flagButton")&&(s="secondary",o="medium"),r.createElement(d.ModalLauncher,{modal:({closeModal:t})=>r.createElement(v,{model:e,closeModal:t,submitFlag:this.submitFlag})},(({openModal:e})=>r.createElement(l.default,{kind:s,size:o,disabled:t,spinner:this.state.sendingFlag,onClick:e},n)))}}const E=a.StyleSheet.create({loginModal:{maxHeight:250}});var C=b;t.default=C},"6/KF":function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("q1tI")),r=s(n("EFbQ")),a=i(n("HEOz"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}class c extends o.Component{render(){return this.props.duplicate?o.createElement("div",{className:"low-quality-notice-header"},o.createElement("h4",null,a._("Reduce, Reuse, Recycle.")),a._("Thank you for your %(translatedFeedbackType)s. Our scrub-bots have integrated it into the earlier %(translatedFeedbackType)s highlighted above and voted that up.",{translatedFeedbackType:this.props.translatedFeedbackType}),o.createElement("br",null),a._("Yours in cleanliness, the Khan Academy Guardians.")):o.createElement("div",{className:"low-quality-notice-header"},o.createElement("h4",null,a._("Please clarify your %(translatedFeedbackType)s.",{translatedFeedbackType:this.props.translatedFeedbackType})),a._('Our robot army has targeted your post as "low quality". To appear on the site as originally written, the Khan Academy Guardians must manually approve your %(translatedFeedbackType)s.',{translatedFeedbackType:this.props.translatedFeedbackType}))}}class d extends o.Component{render(){const{feedbackCode:e,feedbackType:t,feedbackChar:n}=this.props;return o.createElement("div",{className:"low-quality-notice-footer"},o.createElement("em",null,(0,r.default)(e,t,n),"}"))}}var u=function(e){const{feedbackCode:t,feedbackType:n,feedbackChar:s}=e;return{header:o.createElement(c,{duplicate:e.duplicate,translatedFeedbackType:e.translatedFeedbackType}),footer:o.createElement(d,{feedbackCode:t,feedbackType:n,feedbackChar:s})}};t.default=u},JlCW:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("pVnL")),r=c(n("q1tI")),a=s(n("/tP0")),l=c(n("HEOz"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}var d=e=>{const t=[{name:"inappropriate",header:l._("abuse"),examples:[l._("disrespectful or offensive"),l._("an advertisement")]},{name:"lowquality",header:l._("not helpful"),examples:[l._("low quality"),l._("not about the current topic"),l._("soliciting votes or seeking badges"),l._("repeatedly making the same post")]}];return r.createElement(a.default,(0,o.default)({},e,{actions:t}))};t.default=d},NYIc:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("pVnL")),r=s(n("8OQS")),a=u(n("q1tI")),l=s(n("/tP0")),i=u(n("HEOz"));const c=["isComputerProgramming"];function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}var p=e=>{const{isComputerProgramming:t}=e,n=(0,r.default)(e,c),s=i._("Please consult our project guidelines for what we consider to be an appropriate project."),d=[{name:"inappropriate",header:i._("abuse"),examples:[i._("disrespectful or offensive"),i._("advertisement for off-site company/service")]},{name:"plagiarism",header:i._("plagiarism"),examples:[i._("not a spin-off and not giving credit to original author")]},{name:"vote-soliciting",header:i._("soliciting votes"),examples:[i._("requesting votes"),i._("making promises for votes"),i._("receiving votes from a voting ring")]}];return t&&d.push({name:"using-disallowed",header:i._("using disallowed functionality"),examples:[i._("accessing externals or the DOM to go beyond allowed functionality"),i._("examples: playing sounds inappropriately, using localStorage")]}),d.push({name:"doesnotbelong",header:i._("off-topic"),examples:[i._("petitions to change the site"),i._("contentious projects about politics, religion/atheism, or personal issues")]}),a.createElement(l.default,(0,o.default)({},n,{bodyText:s,actions:d}))};t.default=p},PS29:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ModControls=void 0;var o=s(n("hxTL")),r=m(n("q1tI")),a=s(n("i8i4")),l=s(n("5pch")),i=m(n("4PhQ")),c=n("XLNN"),d=s(n("mxj5")),u=s(n("Xb39")),p=m(n("HEOz"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}n("EopJ");m(n("qgfM")).DiscussionItemModel;class f extends r.Component{constructor(...e){super(...e),this.state={clearedFlags:!1},this.handleClick=()=>{this.props.model.clearFlags(),this.setState({clearedFlags:!0})},this.handleMouseEnter=()=>{const e=this.props.model.get("flaggedBy"),t=this.props.model.get("flags");let n=[];e?l.default.each(e,(function(e,s){n.push({user:e,type:t[s]})})):n=l.default.map(t,(function(e){return{type:e}})),(0,o.default)(a.default.findDOMNode(this)).qtip({content:{text:(0,d.default)({flags:n,arrowOnRight:!0})},style:{classes:"custom-override flags-hovercard"},hide:{delay:100,fixed:!0},position:{my:"top right",at:"bottom right"}})}}render(){const e=this.props.model.get("inQueue"),t=this.props.model.get("flags");if(this.state.clearedFlags)return r.createElement("span",null,p._("Cleared flags"));if(t.length){let n;return n=e?p.ngettext("(C)lear Flag","(C)lear %(num)s Flags",t.length):p.ngettext("Clear Flag","Clear %(num)s Flags",t.length),r.createElement("a",{href:"javascript:void(0);",onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,className:"clear-flags"},n)}if(e)return r.createElement("a",{href:"javascript:void(0);",className:"approve"},p._("(A)pprove"));throw new i.KAError("Flags was rendered when it has nothing to show",i.Errors.Internal)}}class g extends r.Component{constructor(...e){super(...e),this.skip=()=>{i.default.log("TODO: Implement this handler")}}render(){return this.props.model.get("inQueue")?r.createElement("span",{onClick:this.skip},p._("Skip")):null}}class y extends r.Component{constructor(...e){super(...e),this.handleEdit=()=>{this.props.model.set("editing",!0)}}render(){return r.createElement("span",{className:"mod-tools__edit",onClick:this.handleEdit},this.props.model.get("inQueue")?p._("(E)dit"):p._("Edit"))}}class v extends r.Component{constructor(...e){super(...e),this.handleUndelete=()=>{this.props.model.undelete()},this.handleDelete=()=>{this.mountPoint=(0,o.default)("<div>").appendTo(document.body)[0],(0,u.default)(r.createElement(c.DeleteFeedbackModal,{model:this.props.model,onClose:this.handleClose}),this.mountPoint)},this.handleClose=()=>{a.default.unmountComponentAtNode(this.mountPoint),this.mountPoint=null}}render(){const e=this.props.model;if(e.get("deleted")){const t=["mod-tools__undelete",e.get("highlightDeleteButton")?"call-to-action":""].join(" ");return r.createElement("span",{className:t,onClick:this.handleUndelete},p._("Undelete"))}return r.createElement("span",{className:"mod-tools__delete",onClick:this.handleDelete},e.get("inQueue")?p._("(D)elete"):p._("Delete"))}}class b extends r.Component{render(){const e=this.props.model,t=!e.get("definitelyNotSpam")&&(e.get("flags").length||e.get("inQueue"))&&["flags",f],n=e.get("inQueue")&&["skip",g],s=e.isEditable()&&["edit",y],o=!e.get("hideModDelete")&&["delete",v],a=(0,c.joinWidgets)([t,n,s,o],this);return r.createElement("span",null,a)}}t.ModControls=b},Rpnt:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("pVnL")),r=f(n("q1tI")),a=n("mR6N"),l=s(n("wa3X")),i=n("JimW"),c=n("Vxy9"),d=n("Uafs"),u=s(n("mXPZ")),p=n("skGw"),h=(n("qgfM"),f(n("HEOz")));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}class g extends r.Component{constructor(...e){super(...e),this.state={errorMessage:"",sendingVote:!1,openModal:!1,justVoted:!1},this.registerVote=()=>{const e=h._("Log in first!");if(!u.default.isLoggedIn)return this.setState({errorMessage:e,openModal:!0});this.setState({sendingVote:!0}),(0,p.khanFetch)("/api/internal/discussions/voteentity",(0,o.default)({method:"POST"},(0,p.formUrlencode)({entity_key:this.props.model.id,vote_type:1}))).then((e=>{if(429!==e.status)return e.json();this.setState({errorMessage:h._("There have been too many requests to this page recently. Try again in a little while."),openModal:!0,sendingVote:!1})})).then((e=>{e&&e.error?this.setState({errorMessage:e.error,openModal:!0,sendingVote:!1}):this.setState({justVoted:!0,sendingVote:!1})})).catch((t=>{this.setState({errorMessage:e,openModal:!0,sendingVote:!1})}))},this.handleClose=()=>{this.setState({openModal:!1})}}render(){const e=this.props.model,t=!e.get("inUserProfile")&&!e.get("isScratchpadCard");if(!this.props.model.get("voteUpOnly")||!t)return null;const n=e.get("upVoted")||this.state.justVoted;let s=e.get("sumVotesIncremented");this.state.justVoted&&s++;const o=`${n?h._("Voted Up!"):h._("Vote Up")} â€¢ ${s}`;return r.createElement(r.Fragment,null,r.createElement(l.default,{kind:"primary",onClick:this.registerVote,spinner:this.state.sendingVote,disabled:n},o),r.createElement(d.ModalLauncher,{onClose:this.handleClose,opened:this.state.openModal,modal:({closeModal:e})=>r.createElement(d.OnePaneDialog,{title:h._("Oh noes!"),content:r.createElement(c.Body,null,this.state.errorMessage),footer:r.createElement(i.View,null,r.createElement(l.default,{kind:"primary",onClick:this.handleClose},h._("Okay"))),style:y.errorModal})}))}}const y=a.StyleSheet.create({errorModal:{maxHeight:250}});var v=g;t.default=v},XLNN:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.joinWidgets=t.Separator=t.DeleteFeedbackModal=void 0;var o=s(n("pVnL")),r=s(n("NguZ")),a=p(n("q1tI")),l=s(n("i8i4")),i=s(n("5pch")),c=s(n("cfQQ")),d=p(n("HEOz"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}t.joinWidgets=function(e,t,n=h){return(0,i.default)(e).chain().filter(i.default.identity).map((function(e){const n=e[0],s=e[1];return a.createElement(s,{model:t.props.model,key:n})})).intersperse((function(e){return a.createElement("span",{key:"separator"+e},a.createElement(n,null)," ")})).value()};class h extends a.Component{render(){return a.createElement("span",(0,o.default)({},this.props,{className:"discussion-meta-separator "+(this.props.className||"")})," ")}}class m extends a.Component{constructor(...e){super(...e),this.handleDelete=()=>{const{profile:e}=this.props;this.props.model.destroy({profile:e}),this.handleCancel()},this.handleCancel=()=>{(0,r.default)(l.default.findDOMNode(this)).modal("hide"),this.props.onClose()}}componentDidMount(){(0,r.default)(l.default.findDOMNode(this)).modal()}render(){return this.props.body.call(this)}}m.defaultProps={body:function(){return a.createElement("div",{className:"modal danger-modal"},a.createElement("p",{className:"modal-body"},d._("Really delete?")),a.createElement("div",{className:"modal-footer"},a.createElement("span",{className:"pointer btn",onClick:this.handleCancel}," ",d._("Cancel")," "),a.createElement("span",{className:"pointer btn btn-danger",onClick:this.handleDelete}," ",d._("Delete")," ")))},onClose:r.default.noop};const f=(0,c.default)(m);t.DeleteFeedbackModal=f;const g=h;t.Separator=g},gdZe:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.TabbedDiscussionList=t.ReplyCount=t.ProjectEvalStatusViewer=t.ProjectEvalReviewContent=t.Note=t.FormattingTips=t.FormControls=t.EditContentForm=t.DiscussionMeta=t.DiscussionListContent=t.AuthorControls=void 0;var o=s(n("pVnL")),r=s(n("96rG")),a=S(n("q1tI")),l=s(n("i8i4")),i=s(n("5pch")),c=s(n("TSYQ")),d=n("Pk2J"),u=n("mR6N"),p=s(n("wa3X")),h=n("g8Be"),m=s(n("E9A0")),f=s(n("Zh9m")),g=n("XLNN"),y=n("4Arr"),v=s(n("nVHT")),b=s(n("wINb")),E=s(n("dFiz")),C=s(n("cfQQ")),_=s(n("vRNn")),k=s(n("Xb39")),w=n("PS29"),O=s(n("3aD9")),M=s(n("Rpnt")),j=s(n("6/KF")),P=n("qgfM"),x=S(n("HEOz")),N=s(n("BIos"));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(s,r,a):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}class F extends a.Component{render(){const e=x._("Accent your posts with *bold* or _italics_ and format `code`");return a.createElement("div",{className:"formatting-tips-container"},a.createElement("div",{className:"formatting-tips-triangle"}),a.createElement("div",{className:"formatting-tips-panel"},a.createElement("table",null,a.createElement("tbody",null,a.createElement("tr",{className:"discussion-guidelines-format-table-header"},a.createElement("td",null,x._("Typing this:")),a.createElement("td",null,x._("Displays this:"))),a.createElement("tr",{className:"discussion-guidelines-format-table"},a.createElement("td",null,e,a.createElement("pre",null,x.doNotTranslate("```if (x < 0) {\n    return;\n}```"))),a.createElement("td",null,a.createElement("span",{dangerouslySetInnerHTML:{__html:(0,y.formatContent)(e)}}),a.createElement("pre",null,a.createElement("code",null,x.doNotTranslate("if (x < 0) {\n    return;\n}")))))))))}}t.FormattingTips=F;class D extends a.Component{constructor(...e){super(...e),this.state={text:this.props.model.getTextContent(),isSaving:!1},this.handleTextChange=e=>{this.setState({text:e.currentTarget.value})},this.handleSubmit=()=>{const e=this.props.model;if(""!==this.state.text){const t=m.default.LegacyRequireIfLoaded.ScratchpadUIModule;if(t){const e=t.ScratchpadUI;if(e.scratchpad&&e.isSaveable()&&e.hasUnsavedChanges()){if(!window.confirm(x._("We want to make sure your code is up to date. Can we save it?")))return;e.triggerSave()}}e.set({text:this.state.text,content:this.state.text});const n=this.props.collection&&this.props.collection.findDuplicate(e);n?(n.markDuplicate(),this.props.onDuplicate&&this.props.onDuplicate()):(this.setState({isSaving:!0}),e.save({},{success:function(e){this.setState({isSaving:!1}),e.get("lowQualityNotice")?this.forceUpdate():this.props.onSave()}.bind(this)}))}}}render(){const e=[""];let t={header:null,footer:null};return this.props.model.get("lowQualityNotice")&&(t=(0,j.default)(this.props.model.get("lowQualityNotice")),e.push("low-quality-notice"),this._needsToFocus=!0),a.createElement("div",{className:"edit-content-form"},a.createElement("div",{className:e.join(" ")},this.props.guidelines,t.header,a.createElement("textarea",{className:"edit-content-form__textarea",onChange:this.handleTextChange,onFocus:this.props.onFocus,ref:e=>this.input=e,value:this.state.text}),t.footer,this.props.hideControls?null:a.createElement(W,{label:this.props.buttonLabel,onCancel:this.props.onCancel,onSubmit:this.handleSubmit,isSaving:this.state.isSaving})))}componentDidMount(){this.input&&this.input.focus()}componentDidUpdate(){(this.props.focus||this._needsToFocus)&&(this.input&&this.input.focus(),this._needsToFocus=!1)}}t.EditContentForm=D,D.defaultProps={guidelines:null,buttonLabel:x._("Save")};class W extends a.Component{constructor(...e){super(...e),this.state={showFormattingTips:!1},this.toggleFormattingTips=()=>{this.setState({showFormattingTips:!this.state.showFormattingTips})},this.handleKeyPress=e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this.props.onCancel())}}render(){const e=a.createElement(v.default,null);return a.createElement("div",{className:"edit-content-form__controls"},a.createElement("div",{className:"edit-content-form__left"},a.createElement(p.default,{size:"small",kind:"tertiary",onClick:this.toggleFormattingTips},x._("Formatting tips"))),a.createElement("div",{className:"edit-content-form__right"},this.props.isSaving?e:null,a.createElement("input",{className:"simple-button primary edit-content-form__submit",type:"button",value:this.props.label,disabled:this.props.isSaving,onClick:this.props.onSubmit}),a.createElement("button",{className:`edit-content-form__cancel ${Y}`,onClick:this.props.onCancel,onKeyPress:this.handleKeyPress,tabIndex:0},x._("Cancel"))," "+x._("or")+" "),this.state.showFormattingTips&&a.createElement(F,null))}}t.FormControls=W;class R extends a.Component{render(){const e=(0,i.default)(this.props.model.get("badges")).map(((e,t)=>a.createElement("img",{key:t,className:"discussion-badge-icon",title:e.translatedDescription,src:(0,b.default)((0,y.stripProtocol)(e.iconSrc)),alt:e.translatedDescription})));return a.createElement("span",{className:"discussion-badges"},e)}}class I extends a.Component{render(){return a.createElement("span",null,x.ngettext("%(num)s Spin-off","%(num)s Spin-offs",this.props.model.get("spinoffCount")))}}class q extends a.Component{render(){let e;return e=this.props.model.isPassingEvalAnswer()?this.props.isProgramOwner?x._("Your project has passed evaluation."):x._("This project has passed evaluation."):this.props.isProgramOwner?x._("Your project needs more work."):x._("This project needs more work."),a.createElement("div",{className:"eval-title"},e)}}t.ProjectEvalStatusViewer=q;class V extends a.Component{constructor(...e){super(...e),this.getOverallInfoElement=e=>{const t=e.filter(".overall-eval-info").text();return t.length>0?a.createElement("div",{className:"more-info"},a.createElement("strong",null,x._("From the evaluator:")),a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,y.formatContent)(t,!0)}})):null}}render(){const e=(0,r.default)(r.default.parseHTML(this.props.model.get("content"))),t=r.default.makeArray(e.filter("li:not(.pass)"));if(this.props.model.isPassingEvalAnswer()){const t=this.getOverallInfoElement(e);return t?a.createElement("div",null,t):null}const n=t.map((function(e,t){const n=(0,r.default)(e).find("div"),s=n.text().length>0?a.createElement("div",{className:"objective-more-info",dangerouslySetInnerHTML:{__html:(0,y.formatContent)(n.text(),!0)}}):null;return n.empty(),a.createElement("li",{key:"objective-"+t},a.createElement("div",{className:"failed-objective-item"},a.createElement("strong",null,(0,r.default)(e).text())),s)}));return a.createElement("div",null,this.getOverallInfoElement(e),a.createElement("div",{className:"failed-objectives"},a.createElement("strong",null,x._("The following objectives need more work:")),a.createElement("ul",{className:"styled-list"},n)))}}t.ProjectEvalReviewContent=V;class L extends a.Component{constructor(...e){super(...e),this.state={currentTab:0},this.handleTabClick=e=>{this.setState({currentTab:e})}}render(){const{listType:e}=this.props,t=(0,i.default)(this.props.labels).map((function(e,t){const n=(0,c.default)({selected:t===this.state.currentTab,[Y]:!0});return a.createElement("button",{className:n,key:t,onClick:(0,i.default)(this.handleTabClick).partial(t)},e)}),this),n=this.props.collections[this.state.currentTab],s=a.createElement(A,{key:this.state.currentTab,showFocus:!0,showEmptyMessage:!0,showRefresh:!0,collection:n,listType:e}),o=a.createElement("div",{className:"discussion-list-header"},a.createElement("span",{className:"discussion-list-sort"},t));return a.createElement("div",{className:"discussion-list"},o,s)}}t.TabbedDiscussionList=L;class U extends a.Component{constructor(...e){super(...e),this.state={fetchedInitial:!1,fetchingMore:!1,fetchingNew:!1,minutesElapsed:0,lastFetchTime:0},this.handleMoreClick=()=>{this.setState({fetchingMore:!0}),this.fetchCollection()},this.handleRefreshClick=()=>{this.setState({fetchingNew:!0}),this.props.collection.cursor=null,this.fetchCollection(!0)}}renderItems(){const{collection:e,listType:t,profile:n}=this.props,s=e.models.filter((e=>!this.props.excludeProjectEval||!e.isProjectEval())).map((e=>e.toJSON())).map((e=>(0,o.default)({},e,{authorAvatarSrc:e.author.avatarSrc,authorKaid:e.author.kaid,authorNickname:e.author.nickname}))),r=Boolean(n&&n.get("isChildAccount"));return a.createElement(N.default,{topicSlug:"",newPostKey:"",cursor:"",tab:t,posts:s,isComplete:!0,discussionContext:{restrictPosting:r}})}render(){if(!this.state.fetchedInitial)return a.createElement(v.default,null);if(0===this.props.collection.size())return a.createElement("div",{className:"discussion-list"},this.props.showEmptyMessage?x._("All requests have been handled."):null);let e=null;if(this.state.fetchingNew)e=a.createElement("span",{className:"discussion-list-refresh"},x._("Checking for updates..."));else if(this.state.minutesElapsed>=2){const t=x.ngettext("%(num)s minute since we last checked for updates.","%(num)s minutes since we last checked for updates.",this.state.minutesElapsed);e=a.createElement("button",{className:`discussion-list-refresh ${Y}`,onClick:this.handleRefreshClick},t,a.createElement("span",{className:"icon-refresh"}),x._("Click to refresh"))}const t=a.createElement("button",{onClick:this.handleMoreClick,type:"button",className:"simple-button discussion-list-more"},x._("Show more comments")),n=a.createElement("button",{className:"simple-button discussion-list-more",disabled:!0},x._("Loading...")),s=this.state.fetchingMore?n:t,o=this.renderItems();return a.createElement("div",null,e,o,this.props.collection.isComplete()?null:s)}componentDidMount(){this.fetchCollection(),this.props.showRefresh&&this.props.schedule.interval((()=>{if(this.props.collection.autoRefresh)this.handleRefreshClick();else{const e=(new Date).getTime()-this.state.lastFetchTime,t=Math.floor(e/1e3/60);this.setState({minutesElapsed:t})}}),6e4)}componentDidUpdate(){if(this.state.fetchedInitial&&this.props.expandKey){const{expandKey:e}=this.props,t=(0,r.default)(l.default.findDOMNode(this)).find("#"+e);if(!t.length)return;t.addClass("highlight success-highlight"),(0,r.default)("html, body").animate({scrollTop:t.offset().top-10}),this.props.expandKey=void 0}}fetchCollection(e=!1){const t=function(){this.setState({fetchedInitial:!0,fetchingMore:!1,fetchingNew:!1,minutesElapsed:0,lastFetchTime:(new Date).getTime()}),this.props.collection.fetchedInitial||(this.props.collection.fetchedInitial=!0,this.props.collection.trigger("change"))}.bind(this);this.props.collection.fetch({remove:e||!1,reset:e||!1,success:t,error:t})}}U.defaultProps={showFocus:!1,showEmptyMessage:!1,showRefresh:!1};const A=(0,d.compose)(C.default,h.withActionScheduler,(0,E.default)((e=>[e.collection])))(U);t.DiscussionListContent=A;class H extends a.Component{constructor(e){super(e);let t=0,n=0;if(e.parent){const s=(0,r.default)(e.parent),o=s.offset();t=o.left+s.outerWidth(!0)/2-86,n=o.top+s.outerHeight(!0)/2-31}this.state={left:t,top:n}}render(){const e={left:this.state.left,top:this.state.top};return a.createElement("div",{className:"discussion-meta-note",style:e},a.createElement("span",null,this.props.description+" "),a.createElement("button",{className:`discussion-meta-note__close ${Y}`,onClick:this.props.onClose},x._("Close")))}}t.Note=H;class z extends a.Component{constructor(...e){super(...e),this.handleReplyClick=()=>{const e=this.props.model.get("replyCountOpen");this.props.model.set("replyCountOpen",!e)}}render(){const e=this.props.model;let t=x.ngettext("%(num)s Comment","%(num)s Comments",e.get("replyCount"));return e.get("restrictPosting")||0!==e.get("replyCount")||(t=x._("Comment")),a.createElement("button",{className:`reply-count ${Y}`,onClick:this.handleReplyClick},t)}}t.ReplyCount=z;class Q extends a.Component{constructor(...e){super(...e),this.handleEdit=()=>{this.props.model.set("editing",!0)},this.handleDelete=()=>{this.mountPoint=(0,r.default)("<div>").appendTo(document.body)[0],(0,k.default)(a.createElement(g.DeleteFeedbackModal,{model:this.props.model,onClose:this.handleClose}),this.mountPoint)},this.handleClose=()=>{l.default.unmountComponentAtNode(this.mountPoint),this.mountPoint=null}}render(){let e=null;return this.props.model.isEditable()&&(e=[a.createElement("span",{className:"mod-tools__edit",onClick:this.handleEdit,key:"edit"},x._("Edit")),a.createElement(g.Separator,{key:"separator"})]),a.createElement("span",{className:"mod-tools"},e,a.createElement("button",{className:`mod-tools__delete ${Y}`,onClick:this.handleDelete,key:"delete"},x._("Delete")))}}t.AuthorControls=Q;class K extends a.Component{render(){const e=this.props.model,t=e.get("focusUrl")+"?qa_expand_key="+e.id;return a.createElement("a",{href:t},a.createElement(_.default,{time:e.get("date")}))}}class B extends a.Component{render(){const e=this.props.model,t=e.get("focus");if("youtubevideo"===t.kind)return a.createElement("span",null);let n=null;return e.canHaveAnswers()&&e.getThumbnailUrl()&&(n=a.createElement("a",{href:e.getFocusUrlWithExpandKey(),className:"discussion-item-thumbnail"},a.createElement("img",{src:(0,b.default)(e.getThumbnailUrl()),alt:t.translatedTitle}))),a.createElement("span",null,a.createElement("span",{className:"discussion-meta-faded"}," "+x._("on")+" "),a.createElement("a",{href:e.getFocusUrlWithExpandKey()},t.translatedTitle),n)}}class J extends a.Component{render(){return a.createElement("span",null,a.createElement("span",{className:"discussion-meta-faded"}," "+x._("by")+" "),a.createElement(f.default,{user:this.props.model.get("author")}))}}class X extends a.Component{render(){const{model:e,profile:t}=this.props,n=e.get("badges").length&&["badges",R];let s=null;e.canHaveVotes()&&(s=["voting",M.default]);const o=e.get("spinoffCount")&&["spinoff-count",I];let r,l=null;!e.get("inUserProfile")&&e.canHaveReplies()&&(l=["reply-count",z]),t&&t.get("isModerator")?r=["mod-controls",w.ModControls]:e.get("showAuthorControls")?e.isEditable()&&(r=["author-controls",Q]):e.isFlaggable()&&(r=["flag-controls",O.default]);const i=(0,g.joinWidgets)([n,s,o,l,r],this);let c=null,d=null,u=null;"scratchpad"===e.get("type")||e.isProjectEvalAnswer()||(c=["permalink",K],d=e.get("focus")&&this.props.showFocus&&["on-focus",B],u=!e.get("inUserProfile")&&["by-author",J]);const p=(0,g.joinWidgets)([c,u,d],this,"span");return a.createElement("div",null,a.createElement("div",{className:"discussion-meta"},a.createElement("div",{className:"discussion-meta-controls"},i),a.createElement("div",{className:"discussion-meta-info"},p)))}}X.defaultProps={showFocus:!1};const $=(0,d.compose)((0,E.default)((e=>{const t=[];if(e.model.canHaveAnswers()){const n=P.DiscussionItemCollection.fromItemAnswers(e.model);t.push(n)}return t.push(e.model),t})),C.default)(X);t.DiscussionMeta=$;const G=u.StyleSheet.create({fakeLink:{":hover":{textDecoration:"underline"}},buttonReset:{border:"none",margin:0,padding:0,overflow:"visible",outline:"none",cursor:"pointer",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal",WebkitFontSmoothing:"inherit",MozOsxFontSmoothing:"inherit",WebkitAppearance:"none"}}),Y=(0,u.css)(G.buttonReset,G.fakeLink)},mxj5:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("9HHG")),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=o?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(s,r,l):s[r]=e[r]}s.default=e,n&&n.set(e,s);return s}(n("HEOz"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var l=o.default.compile(`<div class="hover-card-container">\n    <div class="hover-card-triangle {{#if arrowOnRight}}right{{/if}}"></div>\n    <div class="hover-card-content-container vertical-shadow">\n        <div class="hover-card-content clearfix">\n            <h4 class="pulls">\n                ${r._("Flags:")}\n            </h4>\n            <ul class="flagged-by-users">\n            {{#each flags}}\n                <li class="sample-content-link">\n                    {{#if user}}\n                        <a href="/devadmin/users/{{user}}">{{user}}</a>\n                    {{else}}\n                        ${r._("Unknown or deleted user")}\n                    {{/if}}\n                    - <span class="flag-type">{{type}}</span>\n                </li>\n            {{/each}}\n            </ul>\n        </div>\n    </div>\n</div>`);t.default=l}}]);
//# sourceMappingURL=../../sourcemaps/en/2TCQ.0935d9695f3cc68b5b9e.js.map