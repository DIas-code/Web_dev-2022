(window.webpackJsonp=window.webpackJsonp||[]).push([["6pRI"],{AuwW:function(e,t,n){"use strict";var o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,n&&n.set(e,o);return o}(n("q1tI")),i=n("Pk2J"),a=n("mR6N"),s=n("g8Be"),c=o(n("x+rD")),d=n("skGw"),p=o(n("nVHT")),l=o(n("CtWX")),u=o(n("cfQQ")),h=n("3gDo"),m=o(n("tm9o"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n("h1Ep"),n("TlKz"),n("LN89"),n("BDYO"),n("2YBh"),n("49ih"),n("kIjF"),n("dbFz"),n("QaKC"),n("XFIM"),n("z782"),n("RtRs");class g extends r.Component{constructor(...e){var t;super(...e),t=this,this.state={componentInstance:null},this._isMounted=!1,this.logConversions=()=>{const{topic:e,scratchpad:t,embedded:n}=this.props,{nodeSlug:o}=e,{contentKind:r,id:i}=t;!("Talkthrough"===r||"Challenge"===r)&&i&&(n||t.originIsProject)&&this.props.schedule.timeout((()=>{(0,d.khanFetch)(`/api/internal/user/program/${r}:${i}/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic_slug:o})})}),1e3)},this.onInitScratchPad=()=>{const{ancestorFeedbackType:e,embedded:o,domain:r,topic:i,nextSlug:a,profile:s,scratchpad:{id:c,userAuthoredContentType:d,contentKind:p}}=this.props;return this.setState({componentInstance:null}),Promise.all([n.e("shared"),n.e("ykUf"),n.e("2Lqu"),n.e("30A8")]).then(n.t.bind(null,"+reu",7)).then((async function({ScratchpadUI:n,ScratchpadUIStart:l}){t._isMounted&&(n.ancestorFeedbackType=e,n.termMap=(0,h.getTermMap)(d),await l(),n.init({id:c,embedded:o,domainSlug:r,topic:i,userAuthoredContentType:d,nextSlug:a,profile:s,contentKind:p,onSetComponent:e=>{let n=!1;return t._isMounted&&(n=!0,t.setState({componentInstance:e})),n}},m.default))}))}}componentDidMount(){this._isMounted=!0;const{nodeSlug:e}=this.props.topic;c.default.sendToGA("event","Learning-Action","Scratchpad-View",e),this.props.profileLoading||this.onInitScratchPad(),Promise.resolve().then(n.t.bind(null,"RtRs",7)),Promise.resolve().then(n.t.bind(null,"dbFz",7)),Promise.resolve().then(n.t.bind(null,"kIjF",7)),Promise.resolve().then(n.t.bind(null,"QaKC",7)),Promise.resolve().then(n.t.bind(null,"kIjF",7)),this.logConversions()}componentDidUpdate(e){let t=!1;e.profileLoading&&!this.props.profileLoading&&(this.onInitScratchPad(),t=!0),e.scratchpad.id!==this.props.scratchpad.id&&(t||this.onInitScratchPad(),this.logConversions())}componentWillUnmount(){this._isMounted=!1}render(){const{domain:e,scratchpad:t}=this.props,{componentInstance:n}=this.state;return r.createElement("div",{key:t.id,className:(0,a.css)(b.bodyWrapper)},!n&&r.createElement(p.default,null),r.createElement("div",{className:"box-sizing-content-box-reset"},r.createElement("div",{className:`scratchpad-page bibliotron-scratchpad ${e}-scratchpad`},n)))}}g.defaultProps={embedded:!0};const b=a.StyleSheet.create({bodyWrapper:{marginLeft:16,marginRight:16}}),v=e=>e.profileLoading?r.createElement(l.default,null):r.createElement(g,e);v.defaultProps={embedded:!0};var y=(0,i.compose)(u.default,s.withActionScheduler)(v);t.default=y}}]);
//# sourceMappingURL=../../sourcemaps/en/6pRI.23c00728f5986bb4c282.js.map